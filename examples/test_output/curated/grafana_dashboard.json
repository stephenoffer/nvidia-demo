{
  "dashboard": {
    "title": "GR00T Data Pipeline Monitoring",
    "tags": [
      "pipeline",
      "groot",
      "ray",
      "nvidia"
    ],
    "timezone": "browser",
    "schemaVersion": 27,
    "version": 1,
    "refresh": "10s",
    "panels": [
      {
        "id": 1,
        "title": "Pipeline Throughput",
        "type": "graph",
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 0
        },
        "targets": [
          {
            "expr": "rate(pipeline_pipeline_throughput_samples_per_second[5m])",
            "legendFormat": "Samples/sec",
            "refId": "A"
          }
        ],
        "yaxes": [
          {
            "format": "short",
            "label": "Samples/sec"
          },
          {
            "format": "short"
          }
        ]
      },
      {
        "id": 2,
        "title": "Stage Duration",
        "type": "graph",
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 0
        },
        "targets": [
          {
            "expr": "histogram_quantile(0.95, pipeline_stage_duration_seconds_bucket)",
            "legendFormat": "{{stage}} (p95)",
            "refId": "A"
          },
          {
            "expr": "histogram_quantile(0.50, pipeline_stage_duration_seconds_bucket)",
            "legendFormat": "{{stage}} (p50)",
            "refId": "B"
          }
        ],
        "yaxes": [
          {
            "format": "s",
            "label": "Duration"
          },
          {
            "format": "short"
          }
        ]
      },
      {
        "id": 3,
        "title": "GPU Utilization",
        "type": "graph",
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 8
        },
        "targets": [
          {
            "expr": "pipeline_gpu_utilization{device_id=\"0\"}",
            "legendFormat": "GPU {{device_id}}",
            "refId": "A"
          }
        ],
        "yaxes": [
          {
            "format": "percent",
            "label": "Utilization",
            "max": 1.0,
            "min": 0.0
          },
          {
            "format": "short"
          }
        ]
      },
      {
        "id": 4,
        "title": "GPU Memory Usage",
        "type": "graph",
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 8
        },
        "targets": [
          {
            "expr": "pipeline_gpu_memory_usage_ratio{device_id=\"0\"}",
            "legendFormat": "GPU {{device_id}}",
            "refId": "A"
          }
        ],
        "yaxes": [
          {
            "format": "percent",
            "label": "Memory Usage",
            "max": 1.0,
            "min": 0.0
          },
          {
            "format": "short"
          }
        ]
      },
      {
        "id": 5,
        "title": "Items Processed by Stage",
        "type": "graph",
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 0,
          "y": 16
        },
        "targets": [
          {
            "expr": "rate(pipeline_items_processed_total[5m])",
            "legendFormat": "{{stage}}",
            "refId": "A"
          }
        ],
        "yaxes": [
          {
            "format": "short",
            "label": "Items/sec"
          },
          {
            "format": "short"
          }
        ]
      },
      {
        "id": 6,
        "title": "Error Rate",
        "type": "graph",
        "gridPos": {
          "h": 8,
          "w": 12,
          "x": 12,
          "y": 16
        },
        "targets": [
          {
            "expr": "rate(pipeline_errors_total[5m])",
            "legendFormat": "{{stage}}",
            "refId": "A"
          }
        ],
        "yaxes": [
          {
            "format": "short",
            "label": "Errors/sec"
          },
          {
            "format": "short"
          }
        ]
      },
      {
        "id": 7,
        "title": "Deduplication Rate",
        "type": "stat",
        "gridPos": {
          "h": 4,
          "w": 6,
          "x": 0,
          "y": 24
        },
        "targets": [
          {
            "expr": "pipeline_pipeline_dedup_rate",
            "refId": "A"
          }
        ],
        "options": {
          "unit": "percent",
          "decimals": 2
        }
      },
      {
        "id": 8,
        "title": "Pipeline Uptime",
        "type": "stat",
        "gridPos": {
          "h": 4,
          "w": 6,
          "x": 6,
          "y": 24
        },
        "targets": [
          {
            "expr": "pipeline_pipeline_uptime_seconds",
            "refId": "A"
          }
        ],
        "options": {
          "unit": "s"
        }
      },
      {
        "id": 9,
        "title": "Total Samples Processed",
        "type": "stat",
        "gridPos": {
          "h": 4,
          "w": 6,
          "x": 12,
          "y": 24
        },
        "targets": [
          {
            "expr": "pipeline_pipeline_total_samples",
            "refId": "A"
          }
        ],
        "options": {
          "unit": "short"
        }
      }
    ]
  }
}